parameters:
  serverUrl: ''
  username: ''
  password: ''
  rootDirectory: ''
  remoteDirectory: ''

steps:

  - task: Bash@3
    enabled: true
    displayName: "[doc..] Upload"
    inputs:
      targetType: 'inline'
      script: |
        find ${{ parameters.rootDirectory }} -type f -exec curl -u ${{ parameters.username }}:${{ parameters.password }} --ftp-create-dirs -T {} ftp://${{ parameters.serverUrl }}${{ parameters.remoteDirectory }}{} \;

  - task: FtpUpload@2
    displayName: "[doc..] Upload"
    inputs:
      credentialsOption: inputs
      serverUrl: ${{ parameters.serverUrl }}
      username: ${{ parameters.username }}
      password: ${{ parameters.password }}
      rootDirectory: ${{ parameters.rootDirectory }}
      remoteDirectory: ${{ parameters.remoteDirectory }}
      preservePaths: true
      cleanContents: true