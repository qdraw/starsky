<!DOCTYPE HTML>
<html>
<head>
 <!-- 

Do NOT edit this file -  
This Generated by Starsky Docs 

-->
<meta charset="utf-8">
<title>Starsky Web API application</title><link rel="stylesheet" href="../../assets/style/style.css"><meta name="viewport" content="width=device-width,initial-scale=1"/></head>
<body>

	<header class="docs-header">
		<div class="wrapper">
			<div class="detective"></div> <a href="../../index.html" class="name">Starsky Docs</a>
		</div>
	</header>
<div id="app"><div class="container"><div class="entry-content"><div class="breadcrumb"><a href="../../index.html">home</a> » <a href="../readme.html">starsky</a> » <a href="readme.html">starsky</a> » readme</div>
<h1 id="starsky-web-api-application">Starsky Web API application</h1>
<h2 id="list-of-starskyreadmemd-projects">List of <a href="../../readme.html">Starsky</a> Projects</h2>
<ul>
<li><a href="../../starsky/readme.html">starsky (sln)</a> <em>database photo index & import index project</em><ul>
<li><strong><a href="../../starsky/starsky/readme.html">starsky</a> web api application / interface</strong><ul>
<li><a href="../../starsky/starsky/clientapp/readme.html">clientapp</a> <em>react front-end application</em></li></ul></li>
<li><a href="../../starsky/starskyimportercli/readme.html">starskyImporterCli</a>  <em>import command line interface</em></li>
<li><a href="../../starsky/starskygeocli/readme.html">starskyGeoCli</a>  <em>gpx sync and reverse 'geo tagging'</em></li>
<li><a href="../../starsky/starskywebhtmlcli/readme.html">starskyWebHtmlCli</a>  <em>publish web images to a content package</em></li>
<li><a href="../../starsky/starskywebftpcli/readme.html">starskyWebFtpCli</a>  <em>copy a content package to a ftp service</em></li>
<li><a href="../../starsky/starskyadmincli/readme.html">starskyAdminCli</a>  <em>manage user accounts</em></li>
<li><a href="../../starsky/starskysynchronizecli/readme.html">starskySynchronizeCli</a>  <em>check if disk changes are updated in the database</em></li>
<li><a href="../../starsky/starskythumbnailcli/readme.html">starskyThumbnailCli</a>  <em>speed web performance by generating smaller images</em></li>
<li><a href="../../starsky/starskybusinesslogic/readme.html">Starsky Business Logic</a> <em>business logic libraries (netstandard 2.0)</em></li>
<li><a href="../../starsky/starskytest/readme.html">starskyTest</a>  <em>mstest unit tests</em></li></ul></li>
<li><a href="../../starsky.netframework/readme.html">starsky.netframework</a> <em>Client for older machines (deprecated)</em></li>
<li><a href="../../starsky-tools/readme.html">starsky-tools</a> <em>nodejs tools to add-on tasks</em></li>
<li><a href="../../starskyapp/readme.html">starskyapp</a> <em>Desktop Application</em></li>
<li><a href="../../history.html">Changelog</a> <em>Release notes and history</em></li>
</ul>
<h2 id="starskystarsky-docs">starsky/starsky docs</h2>
<h3 id="structure-configuration">Structure configuration:</h3>
<p>When setup Starksy there are two options to configure the installation.<br />
There is a list of required settings. First the <code>appsettings.json</code> is loaded and the environment variables are overwriting features.<br />
The command line arguments are shortcuts to set an in-app environment variable.</p>
<h3 id="the-order-of-reading-settings">The order of reading settings</h3>
<p>You could use machine specific configuration files: appsettings.{machinename}.json <em>(and replace {machinename} with your computer name in lowercase)</em></p>
<ol>
<li><p>You can use <code>appsettings.json</code> inside the application folder to set base settings.<br />
The order of this files is used to get the values from the appsettings</p>
<ul>
<li><code>/bin/Debug/netcoreapp3.1/appsettings.patch.json</code></li>
<li><code>/bin/Debug/netcoreapp3.1/appsettings.computername.patch.json</code></li>
<li><code>/bin/Debug/netcoreapp3.1/appsettings.json</code></li>
<li><code>/bin/Debug/netcoreapp3.1/appsettings.computername.json</code></li></ul></li>
<li><p>Use Environment variables to overwrite those base settings<br />
For <code>ThumbnailTempFolder</code> use <code>app__ThumbnailTempFolder</code><br />
(<a href="https://github.com/aspnet/Configuration/commit/cafd2e53eb71a6d0cecc60a9e38ea1df2dafb916">source</a>)  </p></li>
<li><p>Command line argumements in the Cli applications to set in-app environment variables</p></li>
</ol>
<h3 id="required-settings-to-start">Required settings to start</h3>
<ol>
<li>To start it is <strong>not</strong> mandatory to adjust any settings.</li>
</ol>
<h3 id="recommend-settings">Recommend settings</h3>
<ol>
<li><code>ThumbnailTempFolder</code> - For storing thumbnails (default: <code>./bin/Debug/netcoreapp3.1/thumbnailTempFolder</code>)</li>
<li><code>StorageFolder</code> - For the main photo directory (default: <code>./bin/Debug/netcoreapp3.1/storageFolder</code>)</li>
<li><code>DatabaseType</code> - <code>mysql</code>, <code>sqlite</code> or  <code>inmemorydatabase</code> are supported (default: <code>sqlite</code>)</li>
<li><code>DatabaseConnection</code> - The connection-string to the database (default: <code>./bin/Debug/netcoreapp3.1/data.db</code>)</li>
<li><code>CameraTimeZone</code> - The timezone of the Camera, for example <code>Europe/Amsterdam</code> (defaults to your local timezone)</li>
</ol>
<h3 id="optional-settings">Optional settings</h3>
<ol>
<li><code>Structure</code> - The structure that will be used when you import files, has a default fallback.</li>
<li><code>ReadOnlyFolders</code> - Accepts a list of folders that never may be edited, defaults a empty list</li>
<li><code>AddMemoryCache</code> - Enable caching <em>(default true)</em><br />
 The only 2 build-in exceptions are when there are no accounts or you already logged in <em>(default false)</em></li>
<li><code>AddSwagger</code> - To show a user interface to show al REST-services <em>(default false)</em></li>
<li><code>ExifToolImportXmpCreate</code> - is used to create at import time a xmp file based on the raw image <em>(default false)</em></li>
<li><code>AddSwaggerExport</code> - To Export Swagger definitions on startup <em>(default false)</em></li>
<li><code>AddLegacyOverwrite</code>- Read Only value for ("Mono.Runtime") <em>(default false)</em></li>
<li><code>Verbose</code> - show more console logging  <em>(default false)</em></li>
<li><code>WebFtp</code> - ftp path, this is used by starskyWebFtpCli</li>
<li><code>PublishProfiles</code> - settings to configure publish output, used by starskyWebHtmlCli and publish button</li>
<li><code>ExifToolPath</code> - A path to Exiftool.exe <em>to ignore the included ExifTool</em></li>
<li><code>isAccountRegisterOpen</code> - Allow everyone to register an account <em>(default false)</em></li>
<li><code>AccountRegisterDefaultRole</code> When a user is new and register an account, give it the role User or Administrator <em>(default User)</em></li>
<li><code>applicationInsightsInstrumentationKey</code> - Track telementry with Microsoft Application Insights <em>(default disabled)</em></li>
<li><code>useHttpsRedirection</code> - Redirect users to https page. You should enable before going to production.<br />
 This toggle is always disabled in debug/develop mode <em>(default false)</em></li>
<li><code>Name</code> Name of the application, does not have much effect <em>(default Starsky)</em></li>
<li><code>AppSettingsPath</code> To store the settings by user in the AppData folder <em>(default empty string)</em></li>
<li><code>UseRealtime</code> Update the user interface realtime <em>default true</em></li>
<li><code>UseDiskWatcher</code> Watch the disk for changes and update the database <em>default false (but will change)</em></li>
<li><code>CheckForUpdates</code> Check if there are updates on github and notify the user <em>default true</em></li>
<li><code>SyncIgnore</code> Ignore pattern to not include disk items while running sync, uses always unix style and startsWith <em>default list with: /lost+found</em></li>
<li><code>ImportIgnore</code> ImportIgnore filter  <em>default list with: lost+found</em></li>
</ol>
<h3 id="appsettingsjson-example">Appsettings.json example</h3>
<pre><code class="json language-json">{
  "App": {
    "ThumbnailTempFolder": "Y:\\data\\photodirectory\\temp",
    "StorageFolder": "Y:\\data\\photodirectory\\storage",
    "DatabaseType": "mysql",
    "DatabaseConnection": "Server=mysqlserver.nl;database=dbname;uid=username;pwd=password;",
    "Structure": "/yyyy/MM/yyyy_MM_dd/yyyyMMdd_HHmmss_{filenamebase}.ext",
    "ReadOnlyFolders": ["/2015","/2018"],
    "AddMemoryCache": "true",
    "CameraTimeZone": "America/New_York",
    "ImportIgnore": ["lost+found"]
  }
}</code></pre>
<blockquote>
  <p>Note: When using a boolean in the json add quotes. Booleans without quotes are ignored</p>
</blockquote>
<blockquote>
  <p>Tip: When using the <code>mysql</code>-setting, make sure the database uses <code>utf8mb4</code> and as collate <code>utf8mb4_unicode_ci</code> to avoid encoding errors.</p>
</blockquote>
<h4 id="appsettings-notes">Appsettings Notes</h4>
<ol>
<li>Structure uses slash as directory separators for Linux and Windows</li>
<li>The settings: <code>ExifToolPath</code>, <code>ThumbnailTempFolder</code> and  <code>StorageFolder</code> uses the system path directory separators</li>
<li>When using Windows please double escape (<code>\\</code>) system path's</li>
</ol>
<h3 id="warmup-script">Warmup script</h3>
<p>The default behavior of .NET is to load everything first.<br />
To be sure that the application is warm before someone arrives, please check <code>tools/starsky-warmup.sh</code>.</p>
<h3 id="search-docs">Search Docs</h3>
<p>Advanced queries are supported by the basic search engine.</p>
<p><strong>All text (not number or date) driven search queries use a contain search</strong></p>
<h4 id="search-operators-documentation">Search operators documentation</h4>
<table>
<thead>
<tr>
<th id="search_options">Search options</th>
<th id="example">example</th>
<th id="description">description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>-tags</strong></td>
<td>test</td>
<td>default option</td>
</tr>
<tr>
<td>-tags</td>
<td>-tags="testtag"</td>
<td></td>
</tr>
<tr>
<td>-tags</td>
<td>-test apple</td>
<td>Ignore the keyword test</td>
</tr>
<tr>
<td>-tags</td>
<td>-Tags-"test"</td>
<td>Ignore the keyword test</td>
</tr>
<tr>
<td>-tags</td>
<td>apple banana</td>
<td>search for apple or banana</td>
</tr>
<tr>
<td><strong>-title</strong></td>
<td>-title="example"</td>
<td></td>
</tr>
<tr>
<td><strong>-filepath</strong></td>
<td>-filepath="/path"</td>
<td>-inurl is the same</td>
</tr>
<tr>
<td><strong>-filename</strong></td>
<td>-filename="file.jpg"</td>
<td></td>
</tr>
<tr>
<td><strong>-filehash</strong></td>
<td>-filehash=3DB75N7JJ6FDOPZY4YHGX4TL</td>
<td></td>
</tr>
<tr>
<td><strong>-parentdirectory</strong></td>
<td>-parentdirectory="/2019"</td>
<td></td>
</tr>
<tr>
<td><strong>-description</strong></td>
<td>-description="search"</td>
<td></td>
</tr>
<tr>
<td><strong>-imageformat</strong></td>
<td>-ImageFormat="jpg"</td>
<td>include <code>jpeg</code></td>
</tr>
<tr>
<td>-imageformat</td>
<td>-ImageFormat="tiff"</td>
<td>including <code>dng</code></td>
</tr>
<tr>
<td>-imageformat</td>
<td>-ImageFormat="bmp"</td>
<td></td>
</tr>
<tr>
<td>-imageformat</td>
<td>-ImageFormat="gif"</td>
<td></td>
</tr>
<tr>
<td>-imageformat</td>
<td>-ImageFormat="png"</td>
<td></td>
</tr>
<tr>
<td>-imageformat</td>
<td>-ImageFormat="xmp"</td>
<td></td>
</tr>
<tr>
<td>-imageformat</td>
<td>-ImageFormat="gpx"</td>
<td></td>
</tr>
<tr>
<td><strong>-datetime</strong></td>
<td>-datetime=1</td>
<td>search for yesterday</td>
</tr>
<tr>
<td>-datetime</td>
<td>-datetime&gt;12 -datetime&lt;2</td>
<td>between 2 and 12 days ago</td>
</tr>
<tr>
<td>-datetime</td>
<td>-datetime=2020-01-01</td>
<td>between 00:00:00 and 23:59:59</td>
</tr>
<tr>
<td>-datetime</td>
<td>-datetime=2020-01-01T14:35:29</td>
<td>on this exact time</td>
</tr>
<tr>
<td><strong>-addtodatabase</strong></td>
<td>-addtodatabase=1</td>
<td>search for yesterday</td>
</tr>
<tr>
<td>-addtodatabase</td>
<td>-addtodatabase&gt;12 -addtodatabase&lt;2</td>
<td>between 2 and 12 days ago</td>
</tr>
<tr>
<td>-addtodatabase</td>
<td>-addtodatabase=2020-01-01</td>
<td>between 00:00:00 and 23:59:59</td>
</tr>
<tr>
<td>-addtodatabase</td>
<td>-addtodatabase=2020-01-01T14:35:29</td>
<td>on this exact time</td>
</tr>
<tr>
<td><strong>-lastedited</strong></td>
<td>-lastedited=1</td>
<td>search for yesterday</td>
</tr>
<tr>
<td>-lastedited</td>
<td>-lastedited&gt;12 -lastedited&lt;2</td>
<td>between 2 and 12 days ago</td>
</tr>
<tr>
<td>-lastedited</td>
<td>-lastedited=2020-01-01</td>
<td>between 00:00:00 and 23:59:59</td>
</tr>
<tr>
<td>-lastedited</td>
<td>-lastedited=2020-01-01T14:35:29</td>
<td>on this exact time</td>
</tr>
<tr>
<td><strong>-isdirectory</strong></td>
<td>-isdirectory=true</td>
<td>search for folders</td>
</tr>
<tr>
<td>-isdirectory</td>
<td>-isdirectory=false</td>
<td>search for items</td>
</tr>
<tr>
<td><strong>-make</strong></td>
<td>-make=Apple</td>
<td>brand name of the camera</td>
</tr>
<tr>
<td><strong>-model</strong></td>
<td>-model="iPhone SE"</td>
<td>search for camera model</td>
</tr>
<tr>
<td><strong>-colorclass</strong></td>
<td>-colorclass=1</td>
<td>search for colorClass</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=0</td>
<td>No Color / None</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=1</td>
<td>Purple / Winner</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=2</td>
<td>Red / WinnerAlt</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=3</td>
<td>Orange / Superior</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=4</td>
<td>Yellow / SuperiorAlt</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=5</td>
<td>Green / Typical</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=6</td>
<td>Azure / TypicalAlt</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=7</td>
<td>Blue / Extras</td>
</tr>
<tr>
<td>-colorclass</td>
<td>-colorclass=8</td>
<td>Grey / No name</td>
</tr>
<tr>
<td><strong>software</strong></td>
<td>-software:"photoshop"</td>
<td>Last edited this app</td>
</tr>
</tbody>
</table>
<h3 id="rest-api-documentation">Rest API documentation</h3>
<p>Starsky has a Json restful API. Please read the documentation</p>
<blockquote>
  <p>Tip: Breaking changes are documented in <code>./history.md</code></p>
</blockquote>
<table>
<thead>
<tr>
<th id="path">Path</th>
<th id="type">Type</th>
<th id="description">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/api/account/status</td>
<td>GET</td>
<td>Check the account status of the login</td>
</tr>
<tr>
<td>/account/login</td>
<td>GET</td>
<td>Login form page (HTML)</td>
</tr>
<tr>
<td>/account/login</td>
<td>HEAD</td>
<td>Login form page (HTML)</td>
</tr>
<tr>
<td>/api/account/login</td>
<td>POST</td>
<td>Login the current HttpContext in</td>
</tr>
<tr>
<td>/api/account/logout</td>
<td>POST</td>
<td>Logout the current HttpContext and redirect to login</td>
</tr>
<tr>
<td>/account/logout</td>
<td>GET</td>
<td>Logout the current HttpContext and redirect to login</td>
</tr>
<tr>
<td>/api/account/change-secret</td>
<td>POST</td>
<td>Update password for current user</td>
</tr>
<tr>
<td>/api/account/register</td>
<td>POST</td>
<td>Create a new user (you need a AF-token first)</td>
</tr>
<tr>
<td>/api/account/register/status</td>
<td>GET</td>
<td>Is the register form open</td>
</tr>
<tr>
<td>/api/account/permissions</td>
<td>GET</td>
<td>List of current permissions</td>
</tr>
<tr>
<td>/api/allowed-types/mimetype/sync</td>
<td>GET</td>
<td>A (string) list of allowed MIME-types ExtensionSyncSupportedList</td>
</tr>
<tr>
<td>/api/allowed-types/mimetype/thumb</td>
<td>GET</td>
<td>A (string) list of allowed ExtensionThumbSupportedList MimeTypes</td>
</tr>
<tr>
<td>/api/allowed-types/thumb</td>
<td>GET</td>
<td>Check if IsExtensionThumbnailSupported</td>
</tr>
<tr>
<td>/api/remove-cache</td>
<td>GET</td>
<td>Delete Database Cache (only the cache)</td>
</tr>
<tr>
<td>/api/remove-cache</td>
<td>POST</td>
<td>Delete Database Cache (only the cache)</td>
</tr>
<tr>
<td>/api/env</td>
<td>HEAD</td>
<td>Show the runtime settings (dont allow AllowAnonymous)</td>
</tr>
<tr>
<td>/api/env</td>
<td>GET</td>
<td>Show the runtime settings (dont allow AllowAnonymous)</td>
</tr>
<tr>
<td>/api/env</td>
<td>POST</td>
<td>Show the runtime settings (dont allow AllowAnonymous)</td>
</tr>
<tr>
<td>/api/delete</td>
<td>DELETE</td>
<td>Remove files from the disk, but the file must contain the !delete! tag</td>
</tr>
<tr>
<td>/api/download-sidecar</td>
<td>GET</td>
<td>Download sidecar file for example image.xmp</td>
</tr>
<tr>
<td>/api/download-photo</td>
<td>GET</td>
<td>Select manually the original or thumbnail</td>
</tr>
<tr>
<td>/error</td>
<td>GET</td>
<td>Return Error page</td>
</tr>
<tr>
<td>/api/export/create-zip</td>
<td>POST</td>
<td>Export source files to an zip archive</td>
</tr>
<tr>
<td>/api/export/zip/{f}.zip</td>
<td>GET</td>
<td>Get the exported zip, but first call 'createZip'use for example this url…</td>
</tr>
<tr>
<td>/api/geo/status</td>
<td>GET</td>
<td>Get Geo sync status</td>
</tr>
<tr>
<td>/api/geo/sync</td>
<td>POST</td>
<td>Reverse lookup for Geo Information and/or add Geo location based on a GP…</td>
</tr>
<tr>
<td>/api/health</td>
<td>GET</td>
<td>Check if the service has any known errors and return only a stringPublic…</td>
</tr>
<tr>
<td>/api/health/details</td>
<td>GET</td>
<td>Check if the service has any known errorsFor Authorized Users only</td>
</tr>
<tr>
<td>/api/health/application-insights</td>
<td>GET</td>
<td>Add Application Insights script to user context</td>
</tr>
<tr>
<td>/api/health/version</td>
<td>POST</td>
<td>Check if Client/App version has a match with the API-versionuses x-api-v…</td>
</tr>
<tr>
<td>/api/health/check-for-updates</td>
<td>GET</td>
<td>Check if Client/App version has a match with the API-version</td>
</tr>
<tr>
<td>/search</td>
<td>POST</td>
<td>Redirect to search GET page (HTML)</td>
</tr>
<tr>
<td>/search</td>
<td>GET</td>
<td>Search GET page (HTML)</td>
</tr>
<tr>
<td>/trash</td>
<td>GET</td>
<td>Trash page (HTML)</td>
</tr>
<tr>
<td>/import</td>
<td>GET</td>
<td>Import page (HTML)</td>
</tr>
<tr>
<td>/preferences</td>
<td>GET</td>
<td>Preferences page (HTML)</td>
</tr>
<tr>
<td>/account/register</td>
<td>GET</td>
<td>View the Register form (HTML)</td>
</tr>
<tr>
<td>/api/import</td>
<td>POST</td>
<td>Import a file using the structure format</td>
</tr>
<tr>
<td>/api/import/thumbnail</td>
<td>POST</td>
<td>Upload thumbnail to ThumbnailTempFolderMake sure that the filename is co…</td>
</tr>
<tr>
<td>/api/import/fromUrl</td>
<td>POST</td>
<td>Import file from web-url (only whitelisted domains) and import this file…</td>
</tr>
<tr>
<td>/api/import/history</td>
<td>GET</td>
<td>Today's imported files</td>
</tr>
<tr>
<td>/api/index</td>
<td>GET</td>
<td>The database-view of a directory</td>
</tr>
<tr>
<td>/api/info</td>
<td>GET</td>
<td>Get realtime (cached a few minutes) about the file</td>
</tr>
<tr>
<td>/api/update</td>
<td>POST</td>
<td>Update Exif and Rotation API</td>
</tr>
<tr>
<td>/api/replace</td>
<td>POST</td>
<td>Search and Replace text in meta information</td>
</tr>
<tr>
<td>/api/publish</td>
<td>GET</td>
<td>Get all publish profilesTo see the entire config check appSettings</td>
</tr>
<tr>
<td>/api/publish/create</td>
<td>POST</td>
<td>Publish</td>
</tr>
<tr>
<td>/api/publish/exist</td>
<td>GET</td>
<td>To give the user UI feedback when submitting the itemNameTrue is not to …</td>
</tr>
<tr>
<td>/redirect/sub-path-relative</td>
<td>GET</td>
<td>Redirect or view path to relative paths using the structure-config (see …</td>
</tr>
<tr>
<td>/api/search</td>
<td>GET</td>
<td>Gets the list of search results (cached)</td>
</tr>
<tr>
<td>/api/search/relative-objects</td>
<td>GET</td>
<td>Get relative paths in a search queryDoes not cover multiple pages (so it…</td>
</tr>
<tr>
<td>/api/search/trash</td>
<td>GET</td>
<td>List of files with the tag: !delete!Caching is disabled on this api call</td>
</tr>
<tr>
<td>/api/search/remove-cache</td>
<td>POST</td>
<td>Clear search cache to show the correct results</td>
</tr>
<tr>
<td>/api/suggest</td>
<td>GET</td>
<td>Gets the list of search results (cached)</td>
</tr>
<tr>
<td>/api/suggest/all</td>
<td>GET</td>
<td>Show all items in the search suggest cache</td>
</tr>
<tr>
<td>/api/suggest/inflate</td>
<td>GET</td>
<td>To fill the cache with the data (only if cache is not already filled)</td>
</tr>
<tr>
<td>/api/sync/mkdir</td>
<td>POST</td>
<td>Make a directory (-p)</td>
</tr>
<tr>
<td>/api/sync</td>
<td>POST</td>
<td>Do a file sync in a background process</td>
</tr>
<tr>
<td>/api/sync/rename</td>
<td>POST</td>
<td>Rename file/folder and update it in the database</td>
</tr>
<tr>
<td>/api/synchronize</td>
<td>POST</td>
<td>Experimental/Alpha API to sync data! Please use /api/sync</td>
</tr>
<tr>
<td>/api/synchronize</td>
<td>GET</td>
<td>Experimental/Alpha API to sync data! Please use /api/sync</td>
</tr>
<tr>
<td>/api/thumbnail/{f}</td>
<td>GET</td>
<td>Http Endpoint to get full size image or thumbnail</td>
</tr>
<tr>
<td>/api/thumbnail-generation</td>
<td>POST</td>
<td>Create thumbnails for a folder in the background</td>
</tr>
<tr>
<td>/api/upload</td>
<td>POST</td>
<td>Upload to specific folder (does not check if already has been imported)U…</td>
</tr>
<tr>
<td>/api/upload-sidecar</td>
<td>POST</td>
<td>Upload sidecar file to specific folder (does not check if already has be…</td>
</tr>
</tbody>
</table>
<h3 id="swagger--openapi">Swagger / OpenAPI</h3>
<p>Swagger is an open-source software framework backed by a large ecosystem<br />
of tools that helps developers design, build, document, and consume RESTful Web services.<br />
There is an swagger definition. You could enable this by setting the following values:</p>
<p>By default this feature is disabled, please use the <code>AddSwagger</code> definition in the AppSettings or use the following environment variable:</p>
<pre><code>app__AddSwagger=true</code></pre>
<p>This is the default location of the swagger documentation</p>
<pre><code>http://localhost:5000/swagger</code></pre>
<h3 id="known-there-are-critical-errors-in-the-following-components">Known 'There are critical errors in the following components:'</h3>
<p>When the UI starts there is an Health API check to make sure that some important components works good</p>
<h4 id="disk-space-errors">Disk Space errors</h4>
<ul>
<li><strong>Storage_StorageFolder</strong> There is not enough disk space available on the storage folder location</li>
<li><strong>Storage_ThumbnailTempFolder</strong> There is not enough disk space available on the thumbnails folder location</li>
<li><strong>Storage_TempFolder</strong> There is not enough disk space available on the temp folder location</li>
</ul>
<h4 id="folder-or-file-not-exist-errors">Folder or file not exist errors</h4>
<ul>
<li><strong>Exist_StorageFolder</strong> The Storage Folder does not exist, please create it first.</li>
<li><strong>Exist_TempFolder</strong> The Temp Folder does not exist, please create it first.</li>
<li><strong>Exist_ExifToolPath</strong> ExifTool is not linked, you need this to write meta data to files.ExifTool.<br />
Try to remove the <em>temp folder</em> and run the Application again.</li>
<li><strong>Exist_ThumbnailTempFolder</strong> The Thumbnail cache Folder does not exist, please create it first.</li>
</ul>
<h4 id="date-issues">Date issues</h4>
<ul>
<li><strong>DateAssemblyHealthCheck</strong>  this setting checks if your current datetime is newer than when this application is build</li>
</ul>
<h4 id="applicationdbcontext-mysql-or-sqlite">ApplicationDbContext, Mysql or Sqlite</h4>
<p>There is also a check to make sure the database runs good</p>
<h4 id="application-insights">Application Insights</h4>
<p>Health issues are also reported to Microsoft Application Insights This only is when a valid key is configured.</p>
<h3 id="known-issues">Known issues</h3>
<h4 id="diskwatcher-in-combination-with-child-folders-that-have-no-access">DiskWatcher in combination with child folders that have no access</h4>
<p>When using <code>useDiskwatcher: true</code> and there are child folders that are not allowed to read<br />
For example the <code>lost+found</code> folder</p>
<pre><code>drwx------ 2 root root  16K Apr 16  2018 lost+found</code></pre>
<p>Then DiskWatcher is stopping and retry 20 times before the state will be disabled</p>
<pre><code>[DiskWatcher] (catch-ed) Access to the path '/mnt/external_disk/lost+found' is denied</code></pre>
<p>Solution: make sure that all child folder are accessible</p>
</div>
</div>
</div>
 </body>
</html>