<!DOCTYPE html>
<html>
    <head>
 <!-- 

Do NOT edit this file -  
This Generated by Starsky Docs 

-->
        <meta charset="utf-8" />
        <link rel="stylesheet" href="assets/style/style.css" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Starsky ClientApp</title><link rel="stylesheet" href="../../../assets/style/style.css"><meta name="viewport" content="width=device-width,initial-scale=1"/></head>
<body>

	<header class="docs-header">
		<div class="wrapper">
			<div class="detective"></div> <a href="../../../index.html" class="name">Starsky Docs</a>
		</div>
	</header>
<div id="app"><div class="container"><div class="entry-content"><div class="breadcrumb"><a href="../../../index.html">home</a> » <a href="../../readme.html">starsky</a> » <a href="../readme.html">starsky</a> » <a href="readme.html">clientapp</a> » readme</div>
<!-- end breadcrumb -->
        <h1 id="starsky-clientapp">Starsky ClientApp</h1>
<h2 id="list-of-starsky-projects">List of <a href="../../../readme.html">Starsky</a> Projects</h2><ul id='list-of-starsky-projects-element'>
<li><a href="../../../starsky/readme.html">starsky (sln)</a> <em>database photo index &amp; import index project</em><ul>
<li><a href="../../../starsky/starsky/readme.html">starsky</a> <em>web api application / interface</em><ul>
<li><strong><a href="../../../starsky/starsky/clientapp/readme.html">clientapp</a> react front-end application</strong></li>
</ul>
</li>
<li><a href="../../../starsky/starskyimportercli/readme.html">starskyImporterCli</a> <em>import command line interface</em></li>
<li><a href="../../../starsky/starskygeocli/readme.html">starskyGeoCli</a> <em>gpx sync and reverse &#39;geo tagging&#39;</em></li>
<li><a href="../../../starsky/starskywebhtmlcli/readme.html">starskyWebHtmlCli</a> <em>publish web images to a content package</em></li>
<li><a href="../../../starsky/starskywebftpcli/readme.html">starskyWebFtpCli</a> <em>copy a content package to a ftp service</em></li>
<li><a href="../../../starsky/starskyadmincli/readme.html">starskyAdminCli</a> <em>manage user accounts</em></li>
<li><a href="../../../starsky/starskysynchronizecli/readme.html">starskySynchronizeCli</a> <em>check if disk changes are updated in the database</em></li>
<li><a href="../../../starsky/starskythumbnailcli/readme.html">starskyThumbnailCli</a> <em>speed web performance by generating smaller images</em></li>
<li><a href="../../../starsky/starskybusinesslogic/readme.html">Starsky Business Logic</a> <em>business logic libraries (netstandard 2.0)</em></li>
<li><a href="../../../starsky/starskytest/readme.html">starskyTest</a> <em>mstest unit tests</em></li>
</ul>
</li>
<li><a href="../../../starsky-tools/readme.html">starsky-tools</a> <em>nodejs tools to add-on tasks</em></li>
<li><a href="../../../starskyapp/readme.html">starskyapp</a> <em>Desktop Application</em><ul>
<li><a href="https://qdraw.github.io/starsky/assets/download/download.html">Download Desktop App</a> <em>Windows and Mac OS version</em></li>
</ul>
</li>
<li><a href="../../../history.html">Changelog</a> <em>Release notes and history</em></li>
</ul>
<h2 id="starskystarskyclientapp-docs">starsky/starsky/clientapp docs</h2>
<p>On top of the Starsky API there is React front-end. This is required to run the web application</p>
<h2 id="available-scripts">Available Scripts</h2>
<p>In the project directory, you can run:</p>
<h3 id="npm-start"><code>npm start</code></h3>
<p>Runs the app in the development mode.<br>
Open <a href="http://localhost:3000">http://localhost:3000</a> to view it in the browser.</p>
<p>The page will reload if you make edits.<br>
You will also see any lint errors in the console.</p>
<p>Make sure you run the Starsky API on <a href="http://localhost:5000">http://localhost:5000</a> or us a localtunnel proxy (which you can find in <code>./starsky-tools/localtunnel</code>)</p>
<h3 id="npm-test"><code>npm test</code></h3>
<p>Launches the test runner in the interactive watch mode.<br>
See the section about <a href="https://facebook.github.io/create-react-app/docs/running-tests">running tests</a> for more information.</p>
<h3 id="npm-testci"><code>npm test:ci</code></h3>
<p>Run all unittests and check if there are any errors</p>
<h3 id="npm-run-build"><code>npm run build</code></h3>
<p>Builds the app for production to the <code>build</code> folder.<br>
It correctly bundles React in production mode and optimizes the build for the best performance.</p>
<p>The build is minified and the filenames include the hashes.<br>
Your app is ready to be deployed!</p>
<p>In this application we use the <code>build.sh</code> or <code>build.ps1</code> to combine the frontend application with the .NET Core backend.</p>
<h3 id="npm-run-storybook"><code>npm run storybook</code></h3>
<p>Storybook is an open source tool for developing UI components in isolation for React and other platfoms. It makes building stunning UIs organized and efficient.</p>
<p>A Storybook is a collection of stories. Each story represents a single visual state of a component.
Technically, a story is a function that returns something that can be rendered to screen.</p>
<pre><code>•
└── src
    └── components
        └── atoms
            └── button-styled
                ├── button-styled.tsx
                └── button-styled.stories.tsx
</code></pre>
<h2 id="project-structure">Project structure</h2>
<p>The clientapp uses the following folder structure</p>
<pre><code>•
└── src
    └── components
    |   └── atoms
    |   |    |    Atoms are the basic building blocks of matter.
    |   |    └── button-styled
    |   |       ├── button-styled.tsx
    |   |       └── button-styled.stories.tsx
    |   |       └── button-styled.spec.tsx
    |   |      Folder has .tsx for component
    |   |      Folder has stories.tsx for storybook
    |   |      Folder has spec.tsx for unit-tests
    |   |
    |   └── molecules
    |   |     Molecules are groups of atoms bonded together
    |   └── organisms
    |         Molecules are building blocks
    └── containers
    |     large containers that contain parts of the UI
    └── contexts
    |   └── archive-context
    |   |     React Context for lists of files
    |   └── detailview-context
    |         React Context for viewing a detailed file
    └── contexts-wrapper
    |      Combine contexts with input from the API
    └── hooks
    |      React hooks to handle API/Keyboard calls
    └── interfaces
    |      Typescript interfaces
    └── pages
    |      Full pages
    └── routes
    |      Routes based on the browser url
    └── shared
    |      Business logic that is shared between multiple components
    └── style
           CSS Styling
</code></pre>
<h3 id="upgrade-create-react-app-to-a-newer-version">Upgrade <code>Create React App</code> to a newer version</h3>
<p>The default Create React App package is used to keep future upgrades less painfull.
In the repository of <a href="https://github.com/facebook/create-react-app/releases">Create React App releases</a> you can find if we are using the latest version.</p>
<h4 id="to-keep-all-cra-dependencies-in-place">To keep all CRA dependencies in place</h4>
<pre><code>npx create-react-app my-app --template typescript
</code></pre>
<ul>
<li>copy the <code>package.json</code> and <code>package-lock.json</code> from the <code>my-app</code> folder to the <code>clientapp</code> folder</li>
</ul>
<pre><code>npm ci
</code></pre>
<p>The following packages are added:</p>
<pre><code>npm install --save abortcontroller-polyfill
npm install --save @reach/router --force
npm install --save intersection-observer
npm install --save @types/reach__router
npm install --save leaflet
npm install --save @types/leaflet
npm install --save @types/storybook__react
npm install --save-dev @storybook/react
npm install --save eslint-config-prettier
npm install --save eslint-plugin-prettier
npm install --save prettier
npm uninstall --save @types/node
npm install --save @types/node
</code></pre>
<blockquote>
<p>Note:
<code>@types/storybook__react</code>is deprecated but needed to build devDependencies</p>
</blockquote>
<blockquote>
<p>@types/node 16.x is used instead of 12.x</p>
</blockquote>
<p>Remove this package</p>
<pre><code>npm uninstall --save web-vitals
</code></pre>
<h4 id="update-the-name-of-the-project">Update the name of the project</h4>
<pre><code class="language-json"> &quot;name&quot;: &quot;clientapp&quot;,
</code></pre>
<h4 id="proxy-tag-for-backend-services--homepage">Proxy tag for backend services &amp; homepage</h4>
<p>Used when running <code>npm start</code></p>
<pre><code class="language-json">&quot;proxy&quot;: &quot;http://localhost:5000&quot;,
&quot;homepage&quot;: &quot;/starsky/&quot;,
</code></pre>
<h4 id="npm-run-testci-is-used-by-the-build-script-to-run-all-tests-and-eslint"><code>npm run test:ci</code> is used by the build-script to run all tests and ESlint</h4>
<p>This is added to the <code>package.json</code></p>
<pre><code class="language-json">&quot;postbuild&quot;: &quot;npm run lint&quot;,
&quot;lint&quot;: &quot;node node_modules/eslint/bin/eslint.js \&quot;src/**\&quot; --max-warnings 715&quot;,
&quot;lint:fix&quot;: &quot;node node_modules/eslint/bin/eslint.js --fix \&quot;src/**\&quot;&quot;,
&quot;format&quot;: &quot;prettier --write \&quot;**/*.+(js|jsx|json|yml|yaml|css|md|vue)\&quot;&quot;,
&quot;test:ci&quot;: &quot;npm run lint &amp;&amp; react-scripts test --watchAll=false --coverage --reporters=default 2&gt;&amp;1&quot;,
&quot;storybook&quot;: &quot;start-storybook&quot;,
&quot;upgrade&quot;: &quot;echo &#39;check readme.md 20211219  v5.0.0&#39;&quot;
</code></pre>
<h3 id="collectcoveragefrom-and-coveragereporters">collectCoverageFrom and coverageReporters</h3>
<p>With jest <code>collectCoverageFrom</code> and <code>coverageReporters</code> are used to get the right output</p>
<pre><code class="language-json">&quot;jest&quot;: {
  &quot;collectCoverageFrom&quot;: [
    &quot;**/*.{ts,tsx}&quot;,
    &quot;!coverage/**&quot;,
    &quot;!**/*.stories.{ts,tsx}&quot;,
    &quot;!node_modules/**&quot;,
    &quot;!src/index.*ts*&quot;,
    &quot;!src/service-worker.ts&quot;,
    &quot;!src/react-app-env.d.ts&quot;,
    &quot;!src/setupTests.js&quot;,
    &quot;!public/**&quot;,
    &quot;!build/**&quot;
  ],
  &quot;coverageReporters&quot;: [
    &quot;text&quot;,
    [&quot;lcov&quot;, {&quot;projectRoot&quot;: &quot;../../&quot;}],
    &quot;json&quot;,
    &quot;cobertura&quot;
  ],
  &quot;coverageThreshold&quot;: {
    &quot;global&quot;: {
      &quot;branches&quot;: 80,
      &quot;functions&quot;: 80,
      &quot;lines&quot;: 80,
      &quot;statements&quot;: 80
    }
  }
},
</code></pre>
<h2 id="eslintprettier">ESlint/prettier</h2>
<p>You should replace the existing eslintConfig chapter</p>
<pre><code class="language-json">  &quot;eslintConfig&quot;: {
    &quot;extends&quot;: [
      &quot;react-app&quot;,
      &quot;react-app/jest&quot;,
       &quot;plugin:prettier/recommended&quot;
    ],
    &quot;plugins&quot;: [&quot;prettier&quot;],
    &quot;rules&quot;: {
      &quot;prettier/prettier&quot;: [
        &quot;error&quot;,
        {
          &quot;endOfLine&quot;: &quot;auto&quot;
        }
      ],
        &quot;testing-library/render-result-naming-convention&quot;: &quot;off&quot;,
        &quot;testing-library/no-container&quot;: &quot;warn&quot;,
        &quot;testing-library/prefer-screen-queries&quot;: &quot;warn&quot;,
        &quot;testing-library/prefer-presence-queries&quot;: &quot;warn&quot;,
        &quot;testing-library/no-unnecessary-act&quot;: &quot;warn&quot;,
        &quot;testing-library/no-node-access&quot;: &quot;warn&quot;,
        &quot;testing-library/no-render-in-setup&quot;: &quot;warn&quot;,
        &quot;testing-library/no-wait-for-multiple-assertions&quot;: &quot;warn&quot;
    }
  },
  &quot;prettier&quot;: {
        &quot;trailingComma&quot;: &quot;none&quot;,
    &quot;bracketSpacing&quot;: true,
    &quot;semi&quot;: true,
    &quot;singleQuote&quot;: false,
    &quot;tabWidth&quot;: 2,
    &quot;useTabs&quot;: false
  },
</code></pre>
<h2 id="learn-more">Learn More</h2>
<p>You can learn more in the <a href="https://facebook.github.io/create-react-app/docs/getting-started">Create React App documentation</a>.</p>
<p>To learn React, check out the <a href="https://reactjs.org/">React documentation</a>.</p>
<h2 id="known-issues">Known issues</h2>
<p>I keep getting this errors:</p>
<p>Argument for &#39;--jsx&#39; option must be: &#39;preserve&#39;, &#39;react-native&#39;, &#39;react&#39;
Cannot use JSX unless the &#39;--jsx&#39; flag is provided.</p>
<p>read this:
<a href="https://stackoverflow.com/questions/64974648/problem-with-visual-studio-code-using-react-jsx-as-jsx-value-with-create-react">https://stackoverflow.com/questions/64974648/problem-with-visual-studio-code-using-react-jsx-as-jsx-value-with-create-react</a></p>

    </div>
</div>
</div>
 </body>
</html>
